package:
  name: gamma-pytools
  version: 1.0.0

source:
  git_url: {{FACET_PATH}}/pytools #todo: change to final

build:
  noarch: python
  script: "python -m pip install . --no-deps --ignore-installed -vv "

requirements:
  host:
    - pip
    - python={{ environ.get('FACET_V_PYTHON_BUILD', '3.8') }}
    - numpy=>=1.16'
  run:
    - python>=3.6,<4.0
    - pandas{{ environ.get('FACET_V_PANDAS', '>=0.24') }}
    - numpy{{ environ.get('FACET_V_NUMPY', '>=1.16') }}
    - joblib{{ environ.get('FACET_V_JOBLIB', '>=0.13') }}
    - matplotlib{{ environ.get('FACET_V_MATPLOT', '>=3.1') }}
    - scipy{{ environ.get('FACET_V_SCIPY', '>=1.2') }}
    - pyyaml>=5
    - typing_inspect>=0.4
test:
  imports:
    - pytools
    - pytools.api
    - pytools.data
    - pytools.expression
    - pytools.fit
    - pytools.parallelization
    - pytools.sphinx
    - pytools.viz
  requires:
    - pytest=5.2
  commands:
    - python -c 'import pytools;
                 import os;
                 assert pytools.__version__ == os.environ["PKG_VERSION"]'
    - pytest -vs ${FACET_PATH}/pytools/test
